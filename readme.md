# Engine Simulator

ブラウザ上で動作するリアルタイム・エンジンサウンドシミュレーターです。  
`AudioWorklet` を使ってエンジン音を合成し、スロットル入力に応じて RPM と音色が変化します。

## 概要

このアプリは以下の3要素で構成されています。

- **UI (`index.html`)**: RPM 表示、スロットルバー、各種パラメータ入力。
- **制御ロジック (`app.js`)**: スロットル補間、RPM 更新、キーボード/タッチ入力処理。
- **音声生成 (`engine-processor.js`)**: ハーモニクス合成、ノイズ成分、共鳴、歪み処理。

## 機能

- エンジンの開始/停止
- キー操作（`SPACE` / `↑` / `W`）またはガスペダルボタン長押しで加速
- 以下パラメータのリアルタイム調整
- プリセット: **NA / Turbo-like / FA24 Boxer**
  - 気筒数（Cylinders）
  - アイドル回転数（Idle RPM）
  - レッドライン（Redline RPM）
  - 慣性（Inertia）
  - ノイズ量（Noise）

FA24 Boxerプリセットでは、低中域の不等間隔パルス感とラフな燃焼ノイズを強め、
水平対向らしい「ドロドロ」感を狙っています。

## 使い方

1. このリポジトリをローカルに配置します。
2. ルートディレクトリで簡易HTTPサーバーを起動します（`AudioWorklet` の都合で `file://` ではなく `http://` 推奨）。

```bash
python3 -m http.server 8000
```

3. ブラウザで `http://localhost:8000` を開きます。
4. **Start Engine** を押して音声を開始します。
5. キー入力またはペダルボタンで加速し、設定値を調整して音の変化を確認します。

## 注意事項

- モバイル端末では、オーディオ再生開始にユーザー操作（ボタンタップ）が必要です。
- ブラウザや端末性能により、音色・遅延・負荷は変わる場合があります。

## 今後の改善アイデア

- ギア比・車速・負荷モデルの導入
- マフラー/車内外視点のEQプリセット追加
- エフェクトチェーン（コンプレッサー、リバーブ）対応
